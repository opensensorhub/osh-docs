<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Real-time System Driver API | OpenSensorHub Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/v2/img/logo.png">
    <meta name="description" content="Java-based middleware for building better Sensor Webs and the Internet of Things">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/v2/assets/css/0.styles.e6d66aac.css" as="style"><link rel="preload" href="/v2/assets/js/app.de07fc73.js" as="script"><link rel="preload" href="/v2/assets/js/2.b6409af3.js" as="script"><link rel="preload" href="/v2/assets/js/22.3f5fd7f7.js" as="script"><link rel="prefetch" href="/v2/assets/js/10.934e304b.js"><link rel="prefetch" href="/v2/assets/js/11.a40fdb62.js"><link rel="prefetch" href="/v2/assets/js/12.d385b62a.js"><link rel="prefetch" href="/v2/assets/js/13.5d6e360c.js"><link rel="prefetch" href="/v2/assets/js/14.dc92e924.js"><link rel="prefetch" href="/v2/assets/js/15.bf5f15bd.js"><link rel="prefetch" href="/v2/assets/js/16.3f9d6a35.js"><link rel="prefetch" href="/v2/assets/js/17.a36a7835.js"><link rel="prefetch" href="/v2/assets/js/18.cb43930a.js"><link rel="prefetch" href="/v2/assets/js/19.a0572494.js"><link rel="prefetch" href="/v2/assets/js/20.c0cc6457.js"><link rel="prefetch" href="/v2/assets/js/21.cba0d168.js"><link rel="prefetch" href="/v2/assets/js/23.e64d3a89.js"><link rel="prefetch" href="/v2/assets/js/24.df8268d7.js"><link rel="prefetch" href="/v2/assets/js/25.9860bcd4.js"><link rel="prefetch" href="/v2/assets/js/26.6ec51060.js"><link rel="prefetch" href="/v2/assets/js/27.dba969e6.js"><link rel="prefetch" href="/v2/assets/js/28.77133da4.js"><link rel="prefetch" href="/v2/assets/js/29.ba00c672.js"><link rel="prefetch" href="/v2/assets/js/3.9ff3ab37.js"><link rel="prefetch" href="/v2/assets/js/30.f96e3501.js"><link rel="prefetch" href="/v2/assets/js/31.c2a50df4.js"><link rel="prefetch" href="/v2/assets/js/32.989d3e2c.js"><link rel="prefetch" href="/v2/assets/js/33.4beec893.js"><link rel="prefetch" href="/v2/assets/js/34.8e2cfb6a.js"><link rel="prefetch" href="/v2/assets/js/35.70a251ee.js"><link rel="prefetch" href="/v2/assets/js/36.840a4953.js"><link rel="prefetch" href="/v2/assets/js/37.39c8e235.js"><link rel="prefetch" href="/v2/assets/js/38.1f62aaf6.js"><link rel="prefetch" href="/v2/assets/js/39.6fdf4279.js"><link rel="prefetch" href="/v2/assets/js/4.34b1eb31.js"><link rel="prefetch" href="/v2/assets/js/40.7c2109d8.js"><link rel="prefetch" href="/v2/assets/js/41.85a1a5d3.js"><link rel="prefetch" href="/v2/assets/js/42.b268743a.js"><link rel="prefetch" href="/v2/assets/js/43.cc126de9.js"><link rel="prefetch" href="/v2/assets/js/44.4abb4f49.js"><link rel="prefetch" href="/v2/assets/js/45.e709c8f5.js"><link rel="prefetch" href="/v2/assets/js/46.0f2e8465.js"><link rel="prefetch" href="/v2/assets/js/47.96e55ff3.js"><link rel="prefetch" href="/v2/assets/js/48.3dcb6228.js"><link rel="prefetch" href="/v2/assets/js/49.02531a67.js"><link rel="prefetch" href="/v2/assets/js/5.c06f7037.js"><link rel="prefetch" href="/v2/assets/js/50.eff61b34.js"><link rel="prefetch" href="/v2/assets/js/51.84df5121.js"><link rel="prefetch" href="/v2/assets/js/6.2e342383.js"><link rel="prefetch" href="/v2/assets/js/7.50dba227.js"><link rel="prefetch" href="/v2/assets/js/8.98285849.js"><link rel="prefetch" href="/v2/assets/js/9.d23d621d.js">
    <link rel="stylesheet" href="/v2/assets/css/0.styles.e6d66aac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2/" class="home-link router-link-active"><img src="/v2/img/logo.png" alt="OpenSensorHub Documentation" class="logo"> <span class="site-name can-hide">OpenSensorHub Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developers
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developers
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Get Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/v2/dev/dev-setup.html" class="sidebar-link">Developer Setup</a></li><li><a href="/v2/dev/concepts.html" class="sidebar-link">OSH Concepts</a></li><li><a href="/v2/dev/osgi-bundles.html" class="sidebar-link">OSGi Bundles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Tutorials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/tutorials/adding-new-modules.html" class="sidebar-link">Adding New Modules</a></li><li><a href="/v2/dev/tutorials/your-first-sensor-driver.html" class="sidebar-link">Your First Sensor Driver</a></li><li><a href="/v2/dev/tutorials/migrating-sensor-driver-from-v1.html" class="sidebar-link">Migrating Sensor Drivers from v1</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Real-Time System Drivers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/procedure-registry.html" class="sidebar-link">Procedure Registry</a></li><li><a href="/v2/dev/driver-lifecycle.html" class="sidebar-link">Device Driver Lifecycle</a></li><li><a href="/v2/dev/java-apis/real-time-driver-api.html" aria-current="page" class="active sidebar-link">Real-time System Driver API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/dev/java-apis/real-time-driver-api.html#coming-soon" class="sidebar-link">Coming soon</a></li><li class="sidebar-sub-header"><a href="/v2/dev/java-apis/real-time-driver-api.html#other-title" class="sidebar-link">Other Title</a></li><li class="sidebar-sub-header"><a href="/v2/dev/java-apis/real-time-driver-api.html#full-example" class="sidebar-link">Full Example</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Events &amp; Messaging</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/event-bus.html" class="sidebar-link">Event Bus</a></li><li><a href="/v2/dev/tasking-queues.html" class="sidebar-link">Tasking Queues</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Persistence</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/federated-database.html" class="sidebar-link">Federated Database</a></li><li><a href="/v2/dev/latest-state-database.html" class="sidebar-link">Latest State Database</a></li><li><a href="/v2/dev/java-apis/datastore-api.html" class="sidebar-link">Datastore API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Processing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/java-apis/processing-api.html" class="sidebar-link">Processing API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/java-apis/security-api.html" class="sidebar-link">Security API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="real-time-system-driver-api"><a href="#real-time-system-driver-api" class="header-anchor">#</a> Real-time System Driver API</h1> <h2 id="coming-soon"><a href="#coming-soon" class="header-anchor">#</a> Coming soon</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This is a tip</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This is a warning</p></div> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>This is a dangerous warning</p></div> <details class="custom-block details"><summary>DETAILS</summary> <p>This is a details block, which does not work in IE / Edge</p></details> <h2 id="other-title"><a href="#other-title" class="header-anchor">#</a> Other Title</h2> <h2 id="full-example"><a href="#full-example" class="header-anchor">#</a> Full Example</h2> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">SWEHelper</span> fac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SWEHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// build SWE Common record structure</span>
	weatherData <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">newDataRecord</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">setDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;http://sensorml.com/ont/swe/property/Weather&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;Weather measurements&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// add time, temperature, pressure, wind speed and wind direction fields</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newTimeStampIsoUTC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;temperature&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;AirTemperature&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Air Temperature&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Cel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;pressure&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;AtmosphericPressure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Air Pressure&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;hPa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;windSpeed&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;WindSpeed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Wind Speed&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;m/s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// for wind direction, we also specify a reference frame</span>
    <span class="token class-name">Quantity</span> q <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;WindDirection&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Wind Direction&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;deg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    q<span class="token punctuation">.</span><span class="token function">setReferenceFrame</span><span class="token punctuation">(</span><span class="token string">&quot;http://sensorml.com/ont/swe/property/NED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    q<span class="token punctuation">.</span><span class="token function">setAxisID</span><span class="token punctuation">(</span><span class="token string">&quot;z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;windDirection&quot;</span><span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">// also generate encoding definition</span>
    weatherEncoding <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">newTextEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token comment">/***************************** BEGIN LICENSE BLOCK ***************************

The contents of this file are subject to the Mozilla Public License, v. 2.0.
If a copy of the MPL was not distributed with this file, You can obtain one
at http://mozilla.org/MPL/2.0/.

Software distributed under the License is distributed on an &quot;AS IS&quot; basis,
WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
for the specific language governing rights and limitations under the License.
 
The Initial Developer is Botts Innovative Research Inc. Portions created by the Initial
Developer are Copyright (C) 2014 the Initial Developer. All Rights Reserved.
 
******************************* END LICENSE BLOCK ***************************/</span>

<span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>sensor<span class="token punctuation">.</span>fakeweather</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TreeMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">SensorHubException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>sensor<span class="token punctuation">.</span></span><span class="token class-name">AbstractSensorModule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>sensor<span class="token punctuation">.</span>fakeweather<span class="token punctuation">.</span></span><span class="token class-name">FakeWeatherOutput</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>vast<span class="token punctuation">.</span>sensorML<span class="token punctuation">.</span></span><span class="token class-name">SMLHelper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rits<span class="token punctuation">.</span>cloning<span class="token punctuation">.</span></span><span class="token class-name">Cloner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">net<span class="token punctuation">.</span>opengis<span class="token punctuation">.</span>gml<span class="token punctuation">.</span>v32<span class="token punctuation">.</span></span><span class="token class-name">AbstractFeature</span><span class="token punctuation">;</span>


<span class="token comment">/**
 * &lt;p&gt;
 * Driver implementation outputting simulated weather data by randomly
 * increasing or decreasing temperature, pressure, wind speed, and
 * wind direction.  Serves as a simple sensor to deploy as well as
 * a simple example of a sensor driver.
 * &lt;/p&gt;
 *
 * @author Mike Botts &lt;mike.botts@botts-inc.com&gt;
 * @since Dec 24, 2014
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FakeWeatherSensor</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSensorModule</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FakeWeatherConfig</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token class-name">FakeWeatherOutput</span> dataInterface<span class="token punctuation">;</span>
    
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// generate identifiers</span>
        <span class="token function">generateUniqueID</span><span class="token punctuation">(</span><span class="token string">&quot;urn:osh:sensor:simweather:&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>serialNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">generateXmlID</span><span class="token punctuation">(</span><span class="token string">&quot;WEATHER_STATION_&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>serialNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// init main data interface</span>
        dataInterface <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FakeWeatherOutput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addOutput</span><span class="token punctuation">(</span>dataInterface<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataInterface<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">afterInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">afterInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">var</span> foiID <span class="token operator">=</span> <span class="token function">getCurrentFeaturesOfInterest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> foi <span class="token operator">=</span> foiMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>foiID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        foiMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> uid <span class="token operator">=</span> foiID<span class="token operator">+</span>i<span class="token punctuation">;</span>
            <span class="token keyword">var</span> newFoi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cloner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deepClone</span><span class="token punctuation">(</span>foi<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AbstractFeature</span><span class="token punctuation">)</span>newFoi<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUniqueIdentifier</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
            foiMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>uid<span class="token punctuation">,</span> newFoi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">updateSensorDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>sensorDescLock<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">updateSensorDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sensorDescription<span class="token punctuation">.</span><span class="token function">isSetDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                sensorDescription<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;Simulated weather station generating realistic pseudo-random measurements&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token class-name">SMLHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SMLHelper</span><span class="token punctuation">(</span>sensorDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">addSerialNumber</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>serialNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataInterface <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            dataInterface<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
    

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataInterface <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            dataInterface<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
       
    <span class="token punctuation">}</span>
    
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/opensensorhub/osh-docs/edit/v2/src/dev/java-apis/real-time-driver-api.md" target="_blank" rel="noopener noreferrer">Edit</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/17/2020, 9:17:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v2/dev/driver-lifecycle.html" class="prev">
        Device Driver Lifecycle
      </a></span> <span class="next"><a href="/v2/dev/event-bus.html">
        Event Bus
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v2/assets/js/app.de07fc73.js" defer></script><script src="/v2/assets/js/2.b6409af3.js" defer></script><script src="/v2/assets/js/22.3f5fd7f7.js" defer></script>
  </body>
</html>
