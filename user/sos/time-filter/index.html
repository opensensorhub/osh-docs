<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Temporal Filtering - OpenSensorHub</title>
  

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Temporal Filtering";
    var mkdocs_page_input_path = "user/sos/time-filter.md";
    var mkdocs_page_url = "/user/sos/time-filter/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-36723568-3', 'opensensorhub.org');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <img src="/img/logo-light.png"/>
        <a href="../../.." class="icon"> OpenSensorHub</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../..">Introduction</a>
        
    </li>
<li>
          
            <li>
    
        <ul class="subnav">
	    <li><span>Getting Started</span></li>
            
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../download/">Download</a>
        
    </li>

	        
	    
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../install/">Installation</a>
        
    </li>

	        
	    
        </ul>
    
<li>
          
            <li>
    
        <ul class="subnav">
	    <li><span>User Documentation</span></li>
            
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../user-guide/">Introduction</a>
        
    </li>

	        
	    
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../web-admin/">Web Admin</a>
        
    </li>

	        
	    
	        
	            
    
        <li class="toctree-l1 current">
            <a class="current" href="../intro/">SOS Interface</a>        
            
                <ul class="subnav">
                    
	                
    <li class="toctree-l1 ">
        <a class="" href="../intro/">Introduction</a>
        
    </li>

	            
	                
    <li class="toctree-l1 ">
        <a class="" href="../get-data/">Retrieving Data</a>
        
    </li>

	            
	                
    <li class="toctree-l1 current">
        <a class="current" href="./">Temporal Filtering</a>
        
            <ul>
            
                
                    <li><a class="toctree-l4" href="#time-instants">Time Instants</a></li>
                
                    <li><a class="toctree-l4" href="#time-periods">Time Periods</a></li>
                
                    <li><a class="toctree-l4" href="#replay-extension">Replay Extension</a></li>
                
            
            </ul>
        
    </li>

	            
	                
    <li class="toctree-l1 ">
        <a class="" href="../spatial-filter/">Spatial Filtering</a>
        
    </li>

	            
	                
    <li class="toctree-l1 ">
        <a class="" href="../foi-filter/">Filtering by Feature</a>
        
    </li>

	            
	                
    <li class="toctree-l1 ">
        <a class="" href="../websocket/">WebSocket Support</a>
        
    </li>

	            
	                
    <li class="toctree-l1 ">
        <a class="" href="../interconnect/">Interconnecting SensorHubs</a>
        
    </li>

	            
                </ul>
            
        </li>
    

	        
	    
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../sps/intro/">SPS Interface</a>
        
    </li>

	        
	    
        </ul>
    
<li>
          
            <li>
    
        <ul class="subnav">
	    <li><span>Developer Documentation</span></li>
            
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../dev/dev-guide/">Developer's Guide</a>
        
    </li>

	        
	    
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../dev/architecture/">Architecture</a>
        
    </li>

	        
	    
	        
	            
    
        <li class="toctree-l1 ">
            <a class="" href="../../../dev/core-apis/">Core APIs</a>        
            
        </li>
    

	        
	    
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../apidocs/">Javadoc</a>
        
    </li>

	        
	    
        </ul>
    
<li>
          
            <li>
    
        <ul class="subnav">
	    <li><span>Tutorials</span></li>
            
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../tutos/adding-new-modules/">Adding New Modules</a>
        
    </li>

	        
	    
	        
	            
    <li class="toctree-l1 ">
        <a class="" href="../../../tutos/your-first-sensor/">Your First Sensor</a>
        
    </li>

	        
	    
        </ul>
    
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../license/">License</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">OpenSensorHub</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>User Documentation &raquo;</li>
        
      
        
          <li>SOS Interface &raquo;</li>
        
      
    
    <li>Temporal Filtering</li>
    <li class="wy-breadcrumbs-aside">
      <!--
        
          <a href="https://github.com/opensensorhub/" class="icon icon-github"> Edit on GitHub</a>
        
      -->
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="temporal-filtering">Temporal Filtering</h1>
<p>OpenSensorHub's SOS implementation supports both <strong>historical</strong> and <strong>real-time</strong> requests for sensor data.</p>
<p>Historical requests are automatically enabled (and properly advertised in the capabilities) when a storage is configured and associated to a sensor. Likewise, real-time requests are automatically enabled when a sensor is directly connected to the SOS (and the sensor module is itself enabled and reports the sensor as connected).</p>
<p>Regarding temporal filtering, SensorHub's implementation only supports the <strong>TEquals</strong> operator for time instants and <strong>During</strong> operator for time periods and, currently, filtering can only be done on the 'phenomenonTime' property. The special value 'now' represents the limit between historical and real-time data.</p>
<p>The following tables explain how the server responds to different temporal filter settings:</p>
<h3 id="time-instants">Time Instants</h3>
<table>
<thead>
<tr>
<th align="left"><strong>Behavior</strong></th>
<th align="left"><strong>Request</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Get observation at exact time</td>
<td align="left"><code>temporalFilter=phenomenonTime,2014-04-01T00:00:00Z</code></td>
</tr>
<tr>
<td align="left">Get latest observation</td>
<td align="left"><code>temporalFilter=phenomenonTime,now</code></td>
</tr>
</tbody>
</table>
<h3 id="time-periods">Time Periods</h3>
<p><em>In all the examples below, 'now' is considered to be at 2014-02-20 and we assume storage contains data until this date.</em></p>
<table>
<thead>
<tr>
<th align="left"><strong>Behavior</strong></th>
<th align="left"><strong>Request</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Get observations for a historical time range</td>
<td align="left"><code>temporalFilter=phenomenonTime,2014-01-01/2014-02-01</code></td>
</tr>
<tr>
<td align="left">Get historical data up to the latest observation</td>
<td align="left"><code>temporalFilter=phenomenonTime,2014-01-01/now</code></td>
</tr>
<tr>
<td align="left">Get real-time stream ending at specific time (1,2)</td>
<td align="left"><code>temporalFilter=phenomenonTime,now/2014-03-01</code></td>
</tr>
<tr>
<td align="left">Get observations for a time range overlapping past and future (1,3) (<em>not supported for now</em>)</td>
<td align="left"><code>temporalFilter=phenomenonTime,2014-01-01/2014-03-01</code></td>
</tr>
</tbody>
</table>
<p>(1) A real-time stream is only available through a persistent connection if sampling period is lower than a certain threshold (usually a few seconds). For lower rate data producers, the <a href="../websocket/">WebSocket</a> protocol can be used instead.</p>
<p>(2) The stream will be closed as soon as an observation more recent than the end date is produced. A date very far in the future can be used to get a virtually never ending data stream.</p>
<p>(3) If real-time streaming is available, the stream will be closed as in (2). Otherwise it will be closed right after the latest available observation has been sent, even if it is much earlier than the end date (i.e. the request will be treated as <code>temporalFilter=phenomenonTime,2014-01-01/now</code>).</p>
<p><em>Note: Dates used are in the ISO8601 format and can include the time part or not (e.g. both 2014-01-01Z and 2013-05-06T12:05:00.111Z are valid). When no time is specified, midnight (00:00:00) is assumed.</em></p>
<h3 id="replay-extension">Replay Extension</h3>
<p>The SOS implementation also supports replaying historical observations at arbitrary speed (i.e. at real-time speed, or slower/faster than real-time). This is supported by adding the <code>replaySpeed</code> parameter to a historical GetResult KVP request, such as in <code>temporalFilter=phenomenonTime,2014-01-01/2014-02-01&amp;replaySpeed=2</code>. The parameter has no effect for a live stream request (i.e. if the requested period starts at 'now')</p>
<p>Observations are replayed at exactly real-time speed (according to observations time tags) with <code>replaySpeed=1</code>. The replay value is in fact a factor relative to real-time so that 10 means replaying 10x faster than real-time (if bandwidth permits!) and 0.1 means replaying 10x slower than real-time.</p>
<p>SensorHub implements this functionality by pausing the SOS data provider thread just the right amount of time to match the period infered by two successive measurement time stamps.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../spatial-filter/" class="btn btn-neutral float-right" title="Spatial Filtering"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../get-data/" class="btn btn-neutral" title="Retrieving Data"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>© Copyright 2015 Sensia Software LLC</p>
    
  </div>

</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/opensensorhub/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../get-data/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../spatial-filter/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>