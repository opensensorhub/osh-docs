<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Procedure Registry | OpenSensorHub Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/v2/img/logo.png">
    <meta name="description" content="Java-based middleware for building better Sensor Webs and the Internet of Things">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/v2/assets/css/0.styles.85e9d0e6.css" as="style"><link rel="preload" href="/v2/assets/js/app.9ccb2959.js" as="script"><link rel="preload" href="/v2/assets/js/2.36d8f2b6.js" as="script"><link rel="preload" href="/v2/assets/js/6.5cf5e428.js" as="script"><link rel="prefetch" href="/v2/assets/js/10.9a61ac89.js"><link rel="prefetch" href="/v2/assets/js/11.c993c8a3.js"><link rel="prefetch" href="/v2/assets/js/12.a16f1770.js"><link rel="prefetch" href="/v2/assets/js/13.237fc215.js"><link rel="prefetch" href="/v2/assets/js/14.cf21a9cd.js"><link rel="prefetch" href="/v2/assets/js/15.c73017bf.js"><link rel="prefetch" href="/v2/assets/js/16.9da3287d.js"><link rel="prefetch" href="/v2/assets/js/17.476afdfa.js"><link rel="prefetch" href="/v2/assets/js/18.6b378198.js"><link rel="prefetch" href="/v2/assets/js/19.684fceff.js"><link rel="prefetch" href="/v2/assets/js/20.2e34678d.js"><link rel="prefetch" href="/v2/assets/js/21.0869625a.js"><link rel="prefetch" href="/v2/assets/js/22.792aa060.js"><link rel="prefetch" href="/v2/assets/js/23.ea38acc4.js"><link rel="prefetch" href="/v2/assets/js/24.897833a7.js"><link rel="prefetch" href="/v2/assets/js/25.ced43957.js"><link rel="prefetch" href="/v2/assets/js/26.c72fdea7.js"><link rel="prefetch" href="/v2/assets/js/27.dc54546e.js"><link rel="prefetch" href="/v2/assets/js/28.c0ccdbaf.js"><link rel="prefetch" href="/v2/assets/js/29.4677cab7.js"><link rel="prefetch" href="/v2/assets/js/3.708a7868.js"><link rel="prefetch" href="/v2/assets/js/30.07a8ea51.js"><link rel="prefetch" href="/v2/assets/js/31.437fb891.js"><link rel="prefetch" href="/v2/assets/js/32.a01df0e1.js"><link rel="prefetch" href="/v2/assets/js/33.b4c33446.js"><link rel="prefetch" href="/v2/assets/js/34.d9a386d3.js"><link rel="prefetch" href="/v2/assets/js/35.c04f0d7d.js"><link rel="prefetch" href="/v2/assets/js/36.4034d774.js"><link rel="prefetch" href="/v2/assets/js/37.4506d32f.js"><link rel="prefetch" href="/v2/assets/js/38.aeeead7f.js"><link rel="prefetch" href="/v2/assets/js/39.b170c31c.js"><link rel="prefetch" href="/v2/assets/js/4.347ee2f4.js"><link rel="prefetch" href="/v2/assets/js/40.f5f189d5.js"><link rel="prefetch" href="/v2/assets/js/41.95c22fba.js"><link rel="prefetch" href="/v2/assets/js/42.790e930c.js"><link rel="prefetch" href="/v2/assets/js/43.c72146b9.js"><link rel="prefetch" href="/v2/assets/js/44.2bb19e3a.js"><link rel="prefetch" href="/v2/assets/js/45.c54960e7.js"><link rel="prefetch" href="/v2/assets/js/5.493eb05c.js"><link rel="prefetch" href="/v2/assets/js/7.14b9824c.js"><link rel="prefetch" href="/v2/assets/js/8.4c865909.js"><link rel="prefetch" href="/v2/assets/js/9.e57e6e9e.js">
    <link rel="stylesheet" href="/v2/assets/css/0.styles.85e9d0e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2/" class="home-link router-link-active"><img src="/v2/img/logo.png" alt="OpenSensorHub Documentation" class="logo"> <span class="site-name can-hide">OpenSensorHub Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developer
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developer
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Quick Start</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/dev-setup.html" class="sidebar-link">Developer Setup</a></li><li><a href="/v2/dev/architecture-overview.html" class="sidebar-link">Architecture Overview</a></li><li><a href="/v2/dev/osgi-bundles.html" class="sidebar-link">Add-Ons and OSGi Bundles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Real-time Device Drivers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/procedure-registry.html" aria-current="page" class="active sidebar-link">Procedure Registry</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/v2/dev/driver-lifecycle.html" class="sidebar-link">Device Driver Lifecycle</a></li><li><a href="/v2/dev/real-time-driver-api.html" class="sidebar-link">Real-time Device Driver API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Events &amp; Messaging</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/event-bus.html" class="sidebar-link">Event Bus</a></li><li><a href="/v2/dev/tasking-queues.html" class="sidebar-link">Tasking Queues</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Persistence</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/federated-database.html" class="sidebar-link">Federated Database</a></li><li><a href="/v2/dev/latest-state-database.html" class="sidebar-link">Latest State Database</a></li><li><a href="/v2/dev/datastore-api.html" class="sidebar-link">Datastore API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Processing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/processing-api.html" class="sidebar-link">Processing API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/security-api.html" class="sidebar-link">Security API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="procedure-registry"><a href="#procedure-registry" class="header-anchor">#</a> Procedure Registry</h1> <p>The <strong>procedure registry</strong> is one of the main components of OSH middleware, whose purpose is to manage all <strong>procedures</strong> (i.e. sensors, actuators, processes...) connected to the hub via <strong>device drivers</strong> or other OSH modules. The diagram below gives an overview of the interactions that exist between the procedure registry and other OSH components:</p> <p><img src="/v2/assets/img/procedure-registry-fig1.9e4007a1.svg" alt="Procedure Registry diagram"></p> <p>In short, a device driver (or other module) can register one or more <strong>procedure</strong> descriptors with the registry that, in turns, exposes them to other OSH components via the <strong>event bus</strong> and the <strong>federated database</strong> interfaces. Once a <strong>procedure</strong> is registered and enabled, device drivers can start publishing <strong>data records</strong> and other events on their <strong>output channels</strong> and receive <strong>commands</strong> on their <strong>tasking channels</strong>.</p> <h3 id="registration"><a href="#registration" class="header-anchor">#</a> Registration</h3> <p><strong>Device drivers</strong> typically create one or more stateful Java objects that represent <strong>procedures</strong> (i.e. that extend the <a href="~@alias/blabla">IProcedureDriver</a> interface). These objects need to be registered before the associated data and metadata can become available to other OSH components.</p> <p>For backward compatibility with v1 drivers, the registration is done automatically for drivers that implement the <a href="@javadoc/org/sensorhub/api/procedure/IProcedureDriver">IProcedureDriver</a> interface themselves but has to be done explicitely by the driver implementation in all other cases.</p> <p>When a <strong>procedure</strong> is registered, the procedure registry connects it automatically to the <strong>event bus</strong>, its associated <strong>database</strong> and <strong>tasking queues</strong>, so that it becomes immediately available for other OSH components to make use of.</p> <div class="custom-block tip"><p class="custom-block-title">EXAMPLES</p> <p>A <strong>standalone sensor</strong> driver creates a single procedure object, and optionally a single feature of interest.</p> <p>An <strong>homogeneous sensor network</strong> (or sensor array) driver will typically register one procedure and many features of interest associated to it.</p> <p>An <strong>heterogeneous sensor network</strong> driver may produce several procedures, each with a separate feature of interest.</p></div> <h3 id="event-dispatching"><a href="#event-dispatching" class="header-anchor">#</a> Event Dispatching</h3> <p>The registry forwards all valid events produced by the driver to the event bus so that other modules can receive notifications in real-time</p> <div class="custom-block tip"><p class="custom-block-title">MIGRATION FROM V1</p> <p>Prior to OSH v2, other OSH modules had to retrieve information directly from the sensor drivers themselves. The recommended approach is now for all modules to access all such information through the <strong>procedure registry</strong>, <strong>federated database</strong> and <strong>event bus</strong> instead.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/opensensorhub/osh-docs/edit/master/dev/procedure-registry.md" target="_blank" rel="noopener noreferrer">Edit</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v2/dev/osgi-bundles.html" class="prev">
        Add-Ons and OSGi Bundles
      </a></span> <span class="next"><a href="/v2/dev/driver-lifecycle.html">
        Device Driver Lifecycle
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v2/assets/js/app.9ccb2959.js" defer></script><script src="/v2/assets/js/2.36d8f2b6.js" defer></script><script src="/v2/assets/js/6.5cf5e428.js" defer></script>
  </body>
</html>
