<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Real-time System Driver API | OpenSensorHub Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/v2/img/logo.png">
    <meta name="description" content="Java-based middleware for building better Sensor Webs and the Internet of Things">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/v2/assets/css/0.styles.f65467ac.css" as="style"><link rel="preload" href="/v2/assets/js/app.c211e37e.js" as="script"><link rel="preload" href="/v2/assets/js/2.9b5e7b70.js" as="script"><link rel="preload" href="/v2/assets/js/19.8b4bf6b2.js" as="script"><link rel="prefetch" href="/v2/assets/js/10.9ce321f3.js"><link rel="prefetch" href="/v2/assets/js/11.402b08d1.js"><link rel="prefetch" href="/v2/assets/js/12.a21ca30c.js"><link rel="prefetch" href="/v2/assets/js/13.7e106ae0.js"><link rel="prefetch" href="/v2/assets/js/14.79c16e97.js"><link rel="prefetch" href="/v2/assets/js/15.78ba609b.js"><link rel="prefetch" href="/v2/assets/js/16.61de94d4.js"><link rel="prefetch" href="/v2/assets/js/17.86d1c85e.js"><link rel="prefetch" href="/v2/assets/js/18.3e9c3412.js"><link rel="prefetch" href="/v2/assets/js/20.d56fc9db.js"><link rel="prefetch" href="/v2/assets/js/21.034253b0.js"><link rel="prefetch" href="/v2/assets/js/22.1ba0c6f6.js"><link rel="prefetch" href="/v2/assets/js/23.95334b0b.js"><link rel="prefetch" href="/v2/assets/js/24.239c4cf4.js"><link rel="prefetch" href="/v2/assets/js/25.1c06e5a6.js"><link rel="prefetch" href="/v2/assets/js/26.4516736e.js"><link rel="prefetch" href="/v2/assets/js/27.7090ef82.js"><link rel="prefetch" href="/v2/assets/js/28.39ee66fc.js"><link rel="prefetch" href="/v2/assets/js/29.44e7d9eb.js"><link rel="prefetch" href="/v2/assets/js/3.363d4551.js"><link rel="prefetch" href="/v2/assets/js/30.47b8b974.js"><link rel="prefetch" href="/v2/assets/js/31.50766568.js"><link rel="prefetch" href="/v2/assets/js/32.6730d9d9.js"><link rel="prefetch" href="/v2/assets/js/33.8afb0244.js"><link rel="prefetch" href="/v2/assets/js/34.ba69a468.js"><link rel="prefetch" href="/v2/assets/js/35.20a18401.js"><link rel="prefetch" href="/v2/assets/js/36.4f15dc27.js"><link rel="prefetch" href="/v2/assets/js/37.78be4c1f.js"><link rel="prefetch" href="/v2/assets/js/38.1ae75989.js"><link rel="prefetch" href="/v2/assets/js/39.b7a4b6e6.js"><link rel="prefetch" href="/v2/assets/js/4.bf905f50.js"><link rel="prefetch" href="/v2/assets/js/40.08bcf83e.js"><link rel="prefetch" href="/v2/assets/js/5.44066470.js"><link rel="prefetch" href="/v2/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/v2/assets/js/7.a00e933e.js"><link rel="prefetch" href="/v2/assets/js/8.0d5ec46b.js"><link rel="prefetch" href="/v2/assets/js/9.2250d602.js">
    <link rel="stylesheet" href="/v2/assets/css/0.styles.f65467ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2/" class="home-link router-link-active"><img src="/v2/img/logo.png" alt="OpenSensorHub Documentation" class="logo"> <span class="site-name can-hide">OpenSensorHub Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developer
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developer
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>General Concepts</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/" aria-current="page" class="sidebar-link">/dev/</a></li><li><a href="/v2/dev/architecture-overview.html" class="sidebar-link">Architecture Overview</a></li><li><a href="/v2/dev/osgi-bundles.html" class="sidebar-link">Add-Ons and OSGi Bundles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Real-Time Device Drivers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/procedure-registry.html" class="sidebar-link">Procedure Registry</a></li><li><a href="/v2/dev/event-bus.html" class="sidebar-link">Event Bus</a></li><li><a href="/v2/dev/real-time-driver-api.html" aria-current="page" class="active sidebar-link">Real-time System Driver API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/dev/real-time-driver-api.html#browser-api-access-restrictions" class="sidebar-link">Browser API Access Restrictions</a></li><li class="sidebar-sub-header"><a href="/v2/dev/real-time-driver-api.html#other-title" class="sidebar-link">Other Title</a></li><li class="sidebar-sub-header"><a href="/v2/dev/real-time-driver-api.html#full-example" class="sidebar-link">Full Example</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Persistence</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/federated-database.html" class="sidebar-link">Federated Database</a></li><li><a href="/v2/dev/latest-state-database.html" class="sidebar-link">Latest State Database</a></li><li><a href="/v2/dev/datastore-api.html" class="sidebar-link">Datastore API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Processing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/processing-api.html" class="sidebar-link">Processing API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/security-api.html" class="sidebar-link">Security API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="real-time-system-driver-api"><a href="#real-time-system-driver-api" class="header-anchor">#</a> Real-time System Driver API</h1> <h2 id="browser-api-access-restrictions"><a href="#browser-api-access-restrictions" class="header-anchor">#</a> Browser API Access Restrictions</h2> <p>Because VuePress applications are server-rendered in Node.js when generating static builds, any Vue usage must conform to the <a href="https://ssr.vuejs.org/en/universal.html" target="_blank" rel="noopener noreferrer">universal code requirements<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. In short, make sure to only access Browser / DOM APIs in <code>beforeMount</code> or <code>mounted</code> hooks.</p> <p>If you are using or demoing components that are not SSR friendly (for example containing custom directives), you can wrap them inside the built-in <code>&lt;ClientOnly&gt;</code> component:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This is a tip</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This is a warning</p></div> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>This is a dangerous warning</p></div> <details class="custom-block details"><summary>DETAILS</summary> <p>This is a details block, which does not work in IE / Edge</p></details> <h2 id="other-title"><a href="#other-title" class="header-anchor">#</a> Other Title</h2> <h2 id="full-example"><a href="#full-example" class="header-anchor">#</a> Full Example</h2> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">SWEHelper</span> fac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SWEHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// build SWE Common record structure</span>
	weatherData <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">newDataRecord</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">setDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;http://sensorml.com/ont/swe/property/Weather&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;Weather measurements&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// add time, temperature, pressure, wind speed and wind direction fields</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newTimeStampIsoUTC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;temperature&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;AirTemperature&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Air Temperature&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Cel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;pressure&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;AtmosphericPressure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Air Pressure&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;hPa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;windSpeed&quot;</span><span class="token punctuation">,</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;WindSpeed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Wind Speed&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;m/s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// for wind direction, we also specify a reference frame</span>
    <span class="token class-name">Quantity</span> q <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">newQuantity</span><span class="token punctuation">(</span><span class="token class-name">SWEHelper</span><span class="token punctuation">.</span><span class="token function">getPropertyUri</span><span class="token punctuation">(</span><span class="token string">&quot;WindDirection&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Wind Direction&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;deg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    q<span class="token punctuation">.</span><span class="token function">setReferenceFrame</span><span class="token punctuation">(</span><span class="token string">&quot;http://sensorml.com/ont/swe/property/NED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    q<span class="token punctuation">.</span><span class="token function">setAxisID</span><span class="token punctuation">(</span><span class="token string">&quot;z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weatherData<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token string">&quot;windDirection&quot;</span><span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">// also generate encoding definition</span>
    weatherEncoding <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">newTextEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token comment">/***************************** BEGIN LICENSE BLOCK ***************************

The contents of this file are subject to the Mozilla Public License, v. 2.0.
If a copy of the MPL was not distributed with this file, You can obtain one
at http://mozilla.org/MPL/2.0/.

Software distributed under the License is distributed on an &quot;AS IS&quot; basis,
WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
for the specific language governing rights and limitations under the License.
 
The Initial Developer is Botts Innovative Research Inc. Portions created by the Initial
Developer are Copyright (C) 2014 the Initial Developer. All Rights Reserved.
 
******************************* END LICENSE BLOCK ***************************/</span>

<span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>sensor<span class="token punctuation">.</span>fakeweather</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TreeMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">SensorHubException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>sensor<span class="token punctuation">.</span></span><span class="token class-name">AbstractSensorModule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>sensorhub<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>sensor<span class="token punctuation">.</span>fakeweather<span class="token punctuation">.</span></span><span class="token class-name">FakeWeatherOutput</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>vast<span class="token punctuation">.</span>sensorML<span class="token punctuation">.</span></span><span class="token class-name">SMLHelper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rits<span class="token punctuation">.</span>cloning<span class="token punctuation">.</span></span><span class="token class-name">Cloner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">net<span class="token punctuation">.</span>opengis<span class="token punctuation">.</span>gml<span class="token punctuation">.</span>v32<span class="token punctuation">.</span></span><span class="token class-name">AbstractFeature</span><span class="token punctuation">;</span>


<span class="token comment">/**
 * &lt;p&gt;
 * Driver implementation outputting simulated weather data by randomly
 * increasing or decreasing temperature, pressure, wind speed, and
 * wind direction.  Serves as a simple sensor to deploy as well as
 * a simple example of a sensor driver.
 * &lt;/p&gt;
 *
 * @author Mike Botts &lt;mike.botts@botts-inc.com&gt;
 * @since Dec 24, 2014
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FakeWeatherSensor</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSensorModule</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FakeWeatherConfig</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token class-name">FakeWeatherOutput</span> dataInterface<span class="token punctuation">;</span>
    
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// generate identifiers</span>
        <span class="token function">generateUniqueID</span><span class="token punctuation">(</span><span class="token string">&quot;urn:osh:sensor:simweather:&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>serialNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">generateXmlID</span><span class="token punctuation">(</span><span class="token string">&quot;WEATHER_STATION_&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>serialNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// init main data interface</span>
        dataInterface <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FakeWeatherOutput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addOutput</span><span class="token punctuation">(</span>dataInterface<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataInterface<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">afterInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">afterInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">var</span> foiID <span class="token operator">=</span> <span class="token function">getCurrentFeaturesOfInterest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> foi <span class="token operator">=</span> foiMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>foiID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        foiMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> uid <span class="token operator">=</span> foiID<span class="token operator">+</span>i<span class="token punctuation">;</span>
            <span class="token keyword">var</span> newFoi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cloner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deepClone</span><span class="token punctuation">(</span>foi<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AbstractFeature</span><span class="token punctuation">)</span>newFoi<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUniqueIdentifier</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
            foiMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>uid<span class="token punctuation">,</span> newFoi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">updateSensorDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>sensorDescLock<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">updateSensorDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sensorDescription<span class="token punctuation">.</span><span class="token function">isSetDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                sensorDescription<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;Simulated weather station generating realistic pseudo-random measurements&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token class-name">SMLHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SMLHelper</span><span class="token punctuation">(</span>sensorDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">addSerialNumber</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>serialNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataInterface <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            dataInterface<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
    

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataInterface <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            dataInterface<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SensorHubException</span>
    <span class="token punctuation">{</span>
       
    <span class="token punctuation">}</span>
    
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Bla bla bla</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/opensensorhub/osh-docs/edit/master/dev/real-time-driver-api.md" target="_blank" rel="noopener noreferrer">Edit</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v2/dev/event-bus.html" class="prev">
        Event Bus
      </a></span> <span class="next"><a href="/v2/dev/federated-database.html">
        Federated Database
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v2/assets/js/app.c211e37e.js" defer></script><script src="/v2/assets/js/2.9b5e7b70.js" defer></script><script src="/v2/assets/js/19.8b4bf6b2.js" defer></script>
  </body>
</html>
