# Event Types

There are different types of events that are generated by OSH components. The most important ones are described below:
 
 
## Topic Hierarchy

Example Topics

|modules/{uuid}/status
procedures/{proc_uid}/status
procedures/{proc_uid}/outputs/{name}/status
procedures/{proc_uid}/outputs/{name}/data
procedures/{proc_uid}/controls/{name}/status
procedures/{proc_uid}/controls/{name}/data

alias for group members
procedures/{proc_group_uid}/members/{proc_uid}/....

wildcards
'+' for single level wildcard
'#' for multi-levelwildcard

| procedures/+/status                      | Status from all registered procedures (catch procedure add/remove) |
| procedures/{proc_uid}/outputs/+/status   | Status from all outputs of one procedure (catch datastream add/remove) |
| procedures/{proc_uid}/outputs/+/data     |  |

For this to work, wildcards have to be evaluated dynamically (i.e. account for topics created after the wilcard subscription is created)


## Module Events

These events are generated by logical modules themselves and are used to notify changes to modules. 

There is only one class for module events called **ModuleEvent* that supports a list of possible subtypes:

- **STATE_CHANGED**: The module has transitioned to a new state
- **CONFIG_CHANGED**: The configuration of the module has changed
- **STATUS**: Event carries a status message about the module
- **ERROR**: Event carries an error message about the module
- **DELETED**: The module was completely deleted from the hub configuration

When the event subtype is **STATE_CHANGED**, possible module state transitions are:

- **LOADED**: A new module has been loaded on the hub instance
- **INITIALIZING**: 
- **INITIALIZED**: 
- **STARTING**: 
- **STARTED**: 
- **STOPPING**: 
- **STOPPED**: 

All module events are published on the module registry topic as well as on module's individual topics.


## Procedure Events

The following events notify changes about **Procedure** instances:

- **ProcedureAddedEvent**: A new procedure has been registered on the hub
- **ProcedureRemovedEvent**: A procedure and all associated data has been permanently removed from the hub
- **ProcedureChangedEvent**: A procedure description has been changed
- **ProcedureDisabledEvent**: A procedure has been disabled (it cannot generate data or accept commands while it is disabled)
- **ProcedureEnabledEvent**: A procedure has been enabled

These events are published to both procedure status topic and procedure registry topic (except for the `added` event that is published only on the procedure registry topic).



### DataStream Events

The following events notify changes about **Procedure** datastreams:

- **DataStreamAddedEvent**: A new datastream has been registered on the hub
- **DataStreamRemovedEvent**: A datastream and all associated data has been permanently removed from the hub
- **DataStreamChangedEvent**: A datastream description has been changed
- **DataStreamDisabledEvent**: The datastream has been disabled (A datastream cannot generate data while it is disabled)
- **DataStreamEnabledEvent**: The datastream has been enabled
- **DataEvent / ObsEvent**: A new data record / observation has been produced

These events are published to both procedure and datastream status topics (except for the `added` event that is published only at the procedure status topic).



## CommandStream Events

OSH components can subscribe to events by calling the event-bus interface using a powerful filtering language.

Event filters allow one to select:

- One or more datasources (procedure, datastream, etc.)
- Filter on content using a predicate



== Event Filtering Diagram ==

