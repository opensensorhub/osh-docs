<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Federated Database | OpenSensorHub Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/v2/img/logo.png">
    <meta name="description" content="Java-based middleware for building better Sensor Webs and the Internet of Things">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/v2/assets/css/0.styles.e6d66aac.css" as="style"><link rel="preload" href="/v2/assets/js/app.c42a39fe.js" as="script"><link rel="preload" href="/v2/assets/js/2.87185056.js" as="script"><link rel="preload" href="/v2/assets/js/6.a3417a85.js" as="script"><link rel="prefetch" href="/v2/assets/js/10.75e40858.js"><link rel="prefetch" href="/v2/assets/js/11.613ac742.js"><link rel="prefetch" href="/v2/assets/js/12.2b9cc6b1.js"><link rel="prefetch" href="/v2/assets/js/13.a1a7545c.js"><link rel="prefetch" href="/v2/assets/js/14.eaec267e.js"><link rel="prefetch" href="/v2/assets/js/15.c37bbc00.js"><link rel="prefetch" href="/v2/assets/js/16.3f2c9487.js"><link rel="prefetch" href="/v2/assets/js/17.764e20ed.js"><link rel="prefetch" href="/v2/assets/js/18.838a47f0.js"><link rel="prefetch" href="/v2/assets/js/19.81ae2924.js"><link rel="prefetch" href="/v2/assets/js/20.ba47890c.js"><link rel="prefetch" href="/v2/assets/js/21.57c383dd.js"><link rel="prefetch" href="/v2/assets/js/22.9d6a3e8b.js"><link rel="prefetch" href="/v2/assets/js/23.1602dcb8.js"><link rel="prefetch" href="/v2/assets/js/24.a8be7f4d.js"><link rel="prefetch" href="/v2/assets/js/25.b8996971.js"><link rel="prefetch" href="/v2/assets/js/26.a5681d68.js"><link rel="prefetch" href="/v2/assets/js/27.cd04c96b.js"><link rel="prefetch" href="/v2/assets/js/28.16004ef0.js"><link rel="prefetch" href="/v2/assets/js/29.b562f410.js"><link rel="prefetch" href="/v2/assets/js/3.e97d644f.js"><link rel="prefetch" href="/v2/assets/js/30.df939108.js"><link rel="prefetch" href="/v2/assets/js/31.dba6f562.js"><link rel="prefetch" href="/v2/assets/js/32.afb7e568.js"><link rel="prefetch" href="/v2/assets/js/33.954999d4.js"><link rel="prefetch" href="/v2/assets/js/34.fa44bded.js"><link rel="prefetch" href="/v2/assets/js/35.4b926444.js"><link rel="prefetch" href="/v2/assets/js/36.218e4f95.js"><link rel="prefetch" href="/v2/assets/js/37.45b7f7c6.js"><link rel="prefetch" href="/v2/assets/js/38.5cf2f609.js"><link rel="prefetch" href="/v2/assets/js/39.00bd54e6.js"><link rel="prefetch" href="/v2/assets/js/4.ba7a93e0.js"><link rel="prefetch" href="/v2/assets/js/40.7c66313c.js"><link rel="prefetch" href="/v2/assets/js/41.55d37852.js"><link rel="prefetch" href="/v2/assets/js/42.49446496.js"><link rel="prefetch" href="/v2/assets/js/43.6cd92324.js"><link rel="prefetch" href="/v2/assets/js/44.2b3c0f83.js"><link rel="prefetch" href="/v2/assets/js/45.fabf376e.js"><link rel="prefetch" href="/v2/assets/js/46.22b990c3.js"><link rel="prefetch" href="/v2/assets/js/47.84cea45f.js"><link rel="prefetch" href="/v2/assets/js/48.127a72c4.js"><link rel="prefetch" href="/v2/assets/js/49.d2704a9f.js"><link rel="prefetch" href="/v2/assets/js/5.e5fa85c5.js"><link rel="prefetch" href="/v2/assets/js/7.6bc674c0.js"><link rel="prefetch" href="/v2/assets/js/8.b5b4a384.js"><link rel="prefetch" href="/v2/assets/js/9.b2c59151.js">
    <link rel="stylesheet" href="/v2/assets/css/0.styles.e6d66aac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2/" class="home-link router-link-active"><img src="/v2/img/logo.png" alt="OpenSensorHub Documentation" class="logo"> <span class="site-name can-hide">OpenSensorHub Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developers
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/v2/web/" class="nav-link">
  Web APIs
</a></div><div class="nav-item"><a href="/v2/dev/" class="nav-link router-link-active">
  Developers
</a></div><div class="nav-item"><a href="/v2/addons/" class="nav-link">
  Add-Ons
</a></div> <a href="https://github.com/opensensorhub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Quick Start</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/dev-setup.html" class="sidebar-link">Developer Setup</a></li><li><a href="/v2/dev/architecture-overview.html" class="sidebar-link">Architecture Overview</a></li><li><a href="/v2/dev/osgi-bundles.html" class="sidebar-link">OSGi Bundles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Tutorials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/tutorials/adding-new-modules.html" class="sidebar-link">Adding New Modules</a></li><li><a href="/v2/dev/tutorials/your-first-sensor-driver.html" class="sidebar-link">Your First Sensor Driver</a></li><li><a href="/v2/dev/tutorials/migrating-sensor-driver-from-v1.html" class="sidebar-link">Migrating Sensor Drivers from v1</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Real-time Device Drivers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/procedure-registry.html" class="sidebar-link">Procedure Registry</a></li><li><a href="/v2/dev/driver-lifecycle.html" class="sidebar-link">Device Driver Lifecycle</a></li><li><a href="/v2/dev/real-time-driver-api.html" class="sidebar-link">Real-time System Driver API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Events &amp; Messaging</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/event-bus.html" class="sidebar-link">Event Bus</a></li><li><a href="/v2/dev/tasking-queues.html" class="sidebar-link">Tasking Queues</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Persistence</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/federated-database.html" aria-current="page" class="active sidebar-link">Federated Database</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/dev/federated-database.html#database-registry" class="sidebar-link">Database Registry</a></li><li class="sidebar-sub-header"><a href="/v2/dev/federated-database.html#federated-identifiers" class="sidebar-link">Federated Identifiers</a></li><li class="sidebar-sub-header"><a href="/v2/dev/federated-database.html#database-registration" class="sidebar-link">Database Registration</a></li></ul></li><li><a href="/v2/dev/latest-state-database.html" class="sidebar-link">Latest State Database</a></li><li><a href="/v2/dev/datastore-api.html" class="sidebar-link">Datastore API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Processing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/processing-api.html" class="sidebar-link">Processing API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/dev/security-api.html" class="sidebar-link">Security API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="federated-database"><a href="#federated-database" class="header-anchor">#</a> Federated Database</h1> <p>The <strong>federated database</strong> is a central OSH component that allows aggregating multiple storage types and make them accessible to other hub components via a unified interface.</p> <p>This means OSH can be configured to store data from different sensors in different <strong>datastores</strong> and still provide a unified view of all data collected. This is particularly useful for aggregating data from several OSH nodes into some sort of central catalog and is shown conceptually on the following diagram:</p> <p><img src="/v2/assets/img/federated-database-fig1.0c3ecbc4.svg" alt="Federated database diagram"></p> <p><strong>Datastore</strong> is meant here in the general sense of the term, so it can be any type of persistent store, including but not limited to relational databases, object databases, data repositories accessed remotely via web services, files on a filesystem, etc.</p> <h2 id="database-registry"><a href="#database-registry" class="header-anchor">#</a> Database Registry</h2> <p>The <strong>database registry</strong> manages all persistence modules loaded on an OSH hub. It then instantiates a <strong>federated database</strong> facade to provide a unified access to all persistent data and act as a mediator between historical data producers and consumers. This is shown on the figure below:</p> <p><img src="/v2/assets/img/federated-database-fig2.35ed90ad.svg" alt="Database registry diagram"></p> <p>For this integration to be possible, each module implementing a database, whether it is a local database (e.g. embedded database) or a connector to a remote database (e.g. )</p> <h2 id="federated-identifiers"><a href="#federated-identifiers" class="header-anchor">#</a> Federated Identifiers</h2> <p>When several datastores are used together, each of them typically generates its own unique IDs (i.e. primary keys) separately, so there is no guarantee that these IDs are unique globally. In order to avoid potential ID conflicts, the <strong>federated database</strong> must thus provide a way to generate its own identifiers and guarantee their uniqueness.</p> <p>This is done by assigning each database a number in OSH and letting the <strong>database registry</strong> and the <strong>federated database</strong> handle the mapping between public IDS and internal IDs.</p> <p>Public IDs are the only ones visible and used by data consumers. All queries sent to the <strong>federated database</strong> must use these public IDs.</p> <p>Internal IDs are the ones used inside each datastore.</p> <h2 id="database-registration"><a href="#database-registration" class="header-anchor">#</a> Database Registration</h2> <p>Each database module must be registered to the OSH <strong>Database Registry</strong> for it to be exposed by the Federated Database. The registry also provides a mechanism to quickly assigns</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/opensensorhub/osh-docs/edit/v2/dev/federated-database.md" target="_blank" rel="noopener noreferrer">Edit</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v2/dev/tasking-queues.html" class="prev">
        Tasking Queues
      </a></span> <span class="next"><a href="/v2/dev/latest-state-database.html">
        Latest State Database
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v2/assets/js/app.c42a39fe.js" defer></script><script src="/v2/assets/js/2.87185056.js" defer></script><script src="/v2/assets/js/6.a3417a85.js" defer></script>
  </body>
</html>
